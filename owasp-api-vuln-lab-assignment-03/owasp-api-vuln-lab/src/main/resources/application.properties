# H2 + JPA
spring.datasource.url=jdbc:h2:mem:apilab;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true

# ---- JWT hardening ----
# Do NOT keep the secret here in prod. Use environment variable APP_JWT_SECRET.
app.jwt.secret=ThisIsASUPER_LONG_random_secret_key_which_is_at_least_32_chars!                         

app.jwt.ttl-seconds=900
app.jwt.issuer=owasp-api-vuln-lab
app.jwt.audience=owasp-api-vuln-lab-client


# Expose error details (VULNERABILITY: API7-Security Misconfiguration)
#server.error.include-message=always
#server.error.include-stacktrace=always

#logging.level.root=INFO



# ---- Error handling ----
# Prevent leaking stack traces or internal error messages to clients
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-binding-errors=never

# === File logging (app.log with rotation) ===
logging.file.name=logs/app.log

logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=14
logging.logback.rollingpolicy.total-size-cap=1GB
logging.logback.rollingpolicy.clean-history-on-start=true

logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.edu.nu.owaspapivulnlab=DEBUG
